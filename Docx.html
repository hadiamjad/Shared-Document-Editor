<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="./static/css/style3.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/07754de8e3.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <script>
        /*username*/
        function script(){
            
            var elements = document.getElementsByClassName("Delete col-sm-1")
            for(i = 0; i< elements.length;i++){
                elements[i].addEventListener("click", function(e) {
                    deleteThisDoc(e.path[1].id)
                });
            }

            var search = document.getElementsByClassName('form-control mr-sm-2')
            search[0].addEventListener("input", e=>{
                e.preventDefault()
                var value = search[0].value
                var boxes = document.getElementsByClassName('Box')
                
                if (value === ""){
                    console.log(value)
                    for(i = 1; i<boxes.length;i++){
                        boxes[i].style.display = null
                    }
                }
                else{
                    for(i = 1; i<boxes.length;i++){
                        var firstChild = boxes[i].firstChild.innerHTML
                        if(firstChild.includes(value)){  
                            boxes[i].style.display = "default"
                        }
                        else{
                            boxes[i].style.display="none"
                        }
                    }
                }
            })

            var box = document.getElementsByClassName("Title")
            for(i = 0; i< box.length;i++){
                box[i].addEventListener("click", function(e) {
                    $.ajax({
                    type: "POST",
                    url: "/clickDocs",
                    data:{
                        id: e.path[1].id,
                        email : user
                    },
                    success: function (data) {
                        window.location.replace("http://localhost:3000/editor");
                    }
                });
                });
            }

            var newDoc = document.getElementsByClassName("Add col-sm-1")
            newDoc[0].addEventListener("click", function(e){
                $.ajax({
                    type: "POST",
                    url: "/newDocs",
                    data:{
                        email: user
                    },
                    success: function (data) {
                        $.ajax({
                            type: "POST",
                            url: "/Docs",
                            data:{
                                email : user
                            },
                            success: function (data) {
                                window.location.replace("http://localhost:3000/Docs");
                            }
                        });	
                    }
                });
            });
        }
        function deleteThisDoc(did){
            $.ajax({
				type: "POST",
				url: "/deleteDocs",
				data:{
					id : did
				},
				success: function (data) {
                    $.ajax({
                        type: "POST",
                        url: "/Docs",
                        data:{
                            email : user
                        },
                        success: function (data) {
                            window.location.replace("http://localhost:3000/Docs");
                        }
                    });	
				}
			});
        }
    </script>
</head>
<body onload="script();">
    <div id="Notepad">
        <div id="TopBar">
            <nav class="navbar navbar-expand-md navbar-custom">
                <a href="#"  >
                    <img src="./static/notepad-icon-png-8-original.png" height="40" >
                </a>
                <div class="navbar mr-auto" >My Documents</div>
                <div class="navbar ml-auto" >
                    <form class="form-inline my-2 my-lg-0">
                        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-light my-2 my-sm-0" type="submit">Search</button>
                    </form>
                </div>
            </nav>
        </div>
    
        <div class="Documents">
                <div class="Box" >
                        <div class="Title">New Document</div>
                        <div class="Icons row ml-auto">
                                <div class="Share col-sm-1"><i class="fas fa-user-friends"></i></div>
                                <div class="Add col-sm-1"><i class="fas fa-file-medical"></i></div>
                        </div>
                </div>
                <!-- content -->
        </div>
</div>
</body>
</html>